<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>second-blog | Ychous</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Kafka集群搭建部署之前先搭建好zookeeper集群（参考zookeeper资料）部署环境要求安装包：zookeeper-3.4.5、jdk1.7、kafka_2.11-0.10.1.1">
<meta property="og:type" content="article">
<meta property="og:title" content="second-blog">
<meta property="og:url" content="http://youchous.github.io/2019/03/02/second-blog/index.html">
<meta property="og:site_name" content="Ychous">
<meta property="og:description" content="Kafka集群搭建部署之前先搭建好zookeeper集群（参考zookeeper资料）部署环境要求安装包：zookeeper-3.4.5、jdk1.7、kafka_2.11-0.10.1.1">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-02T13:31:39.124Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="second-blog">
<meta name="twitter:description" content="Kafka集群搭建部署之前先搭建好zookeeper集群（参考zookeeper资料）部署环境要求安装包：zookeeper-3.4.5、jdk1.7、kafka_2.11-0.10.1.1">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
  <link rel="stylesheet" href="/css/donate.css">
  
</head>
</html>
  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-second-blog" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav class="mobile-nav">
    <h1 class="nickname">Ychous</h1>
    <ul class="mobile-nav-menu">
      <label for="mobile-menu-toggle"><a>&#9776; Menu</a></label>
      <input type="checkbox" id="mobile-menu-toggle">
      <ul class="mobile-nav-link">
        
        <a href="/">Home</a>
        
        <a href="/archives">Archives</a>
        
        <a href="/about">About</a>
        
      </ul>
    </ul>
  </nav>
	
		<nav id="main-nav" class="main-nav nav-left">
	
	
	  <a class="main-nav-link" href="/">Home</a>
	
	  <a class="main-nav-link" href="/archives">Archives</a>
	
	  <a class="main-nav-link" href="/about">About</a>
	
  </nav>
</header>

  <hr>
  <div class="article-inner">
    

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      second-blog
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <h1 id="Kafka集群搭建"><a href="#Kafka集群搭建" class="headerlink" title="Kafka集群搭建"></a>Kafka集群搭建</h1><h2 id="部署之前先搭建好zookeeper集群（参考zookeeper资料）"><a href="#部署之前先搭建好zookeeper集群（参考zookeeper资料）" class="headerlink" title="部署之前先搭建好zookeeper集群（参考zookeeper资料）"></a>部署之前先搭建好zookeeper集群（参考zookeeper资料）</h2><h2 id="部署环境要求安装包：zookeeper-3-4-5、jdk1-7、kafka-2-11-0-10-1-1"><a href="#部署环境要求安装包：zookeeper-3-4-5、jdk1-7、kafka-2-11-0-10-1-1" class="headerlink" title="部署环境要求安装包：zookeeper-3.4.5、jdk1.7、kafka_2.11-0.10.1.1"></a>部署环境要求安装包：zookeeper-3.4.5、jdk1.7、kafka_2.11-0.10.1.1</h2><a id="more"></a>
<h1 id="zookeeper部署步骤"><a href="#zookeeper部署步骤" class="headerlink" title="zookeeper部署步骤"></a>zookeeper部署步骤</h1><h1 id="将需要的安装包放到各服务器-opt目录下并解压"><a href="#将需要的安装包放到各服务器-opt目录下并解压" class="headerlink" title="将需要的安装包放到各服务器/opt目录下并解压"></a>将需要的安装包放到各服务器/opt目录下并解压</h1><p>tar -xzvf kafka_2.11-0.10.1.1.tgz</p>
<h1 id="修改-kafka-2-11-0-10-1-1-conf-server-properties文件"><a href="#修改-kafka-2-11-0-10-1-1-conf-server-properties文件" class="headerlink" title="修改../kafka_2.11-0.10.1.1/conf/server.properties文件"></a>修改../kafka_2.11-0.10.1.1/conf/server.properties文件</h1><p>vi ../kafka_2.11-0.10.1.1/conf/server.properties</p>
<p>broker.id=2  #每台kafka的id不能重复<br>host.name=10.136.15.10  #每台kafka的ip地址<br>zookeeper.connect=10.136.15.10:12181,10.136.15.11:12181,10.136.15.12:12181  #多个zookeeper时使用“,”号隔开</p>
<h1 id="zookeeper连接信息"><a href="#zookeeper连接信息" class="headerlink" title="zookeeper连接信息"></a>zookeeper连接信息</h1><p>message.max.byte=5242880<br>default.replication.factor=2<br>replica.fetch.max.bytes=5242880</p>
<h1 id="修改完后保存"><a href="#修改完后保存" class="headerlink" title="修改完后保存"></a>修改完后保存</h1><p>:wq</p>
<h1 id="部署完成后首先启动各台服务器上的zookeeper-再启动kafka"><a href="#部署完成后首先启动各台服务器上的zookeeper-再启动kafka" class="headerlink" title="部署完成后首先启动各台服务器上的zookeeper,再启动kafka"></a>部署完成后首先启动各台服务器上的zookeeper,再启动kafka</h1><p>./zkServer.sh start<br>./zkServer.sh status</p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="启动-kafka-（带-amp-表示后台执行）"><a href="#启动-kafka-（带-amp-表示后台执行）" class="headerlink" title="启动 kafka （带 &amp; 表示后台执行）"></a>启动 kafka （带 &amp; 表示后台执行）</h2><p>bin/kafka-server-start.sh config/server.properties &amp;<br>bin/kafka-server-start.sh -daemon config/server.properties</p>
<h2 id="创建topic（创建一个名为test的topic，只有一个副本，一个分区）"><a href="#创建topic（创建一个名为test的topic，只有一个副本，一个分区）" class="headerlink" title="创建topic（创建一个名为test的topic，只有一个副本，一个分区）"></a>创建topic（创建一个名为test的topic，只有一个副本，一个分区）</h2><p>bin/kafka-topics.sh –create –zookeeper ip:2181 –replication-factor 1 –partitions 1 –topic test</p>
<h2 id="查看创建的topic"><a href="#查看创建的topic" class="headerlink" title="查看创建的topic"></a>查看创建的topic</h2><p>bin/kafka-topics.sh -list -zookeeper ip:2181</p>
<h2 id="启动producer"><a href="#启动producer" class="headerlink" title="启动producer"></a>启动producer</h2><p>bin/kafka-console-producer.sh –broker-list ip:9092 –topic test</p>
<h2 id="启动consumer"><a href="#启动consumer" class="headerlink" title="启动consumer"></a>启动consumer</h2><p>bin/kafka-console-consumer.sh –zookeeper ip:2181 –topic test –from-beginning</p>
<h2 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h2><p>/kafka/logs/server.log</p>
<p>问题总结：</p>
<h1 id="启动kafka时报拒绝连接信息"><a href="#启动kafka时报拒绝连接信息" class="headerlink" title="启动kafka时报拒绝连接信息"></a>启动kafka时报拒绝连接信息</h1><h2 id="检查zookeeper是否成功启动，查看zookeeper状态，确保zookeeper成功启动"><a href="#检查zookeeper是否成功启动，查看zookeeper状态，确保zookeeper成功启动" class="headerlink" title="检查zookeeper是否成功启动，查看zookeeper状态，确保zookeeper成功启动"></a>检查zookeeper是否成功启动，查看zookeeper状态，确保zookeeper成功启动</h2><h2 id="检查kafka下的-conf-文件夹里的zookeeper-config文件里的端口设置是否和单独安装的zookeeper配置文件一致"><a href="#检查kafka下的-conf-文件夹里的zookeeper-config文件里的端口设置是否和单独安装的zookeeper配置文件一致" class="headerlink" title="检查kafka下的../conf/文件夹里的zookeeper.config文件里的端口设置是否和单独安装的zookeeper配置文件一致"></a>检查kafka下的../conf/文件夹里的zookeeper.config文件里的端口设置是否和单独安装的zookeeper配置文件一致</h2>
      
      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2019/03/02/second-blog/" class="article-date">
  <time datetime="2019-03-02T13:28:53.000Z" itemprop="datePublished">2019-03-02</time>
</a>

        </li>
        
        
        <hr>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <span id="article-nav-newer" class="article-nav-link-wrap newer"></span>
  
  
    <a href="/2019/03/02/my-first-blog/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">my-first-blog</div>
    </a>
  
</nav>


  
</article>










      </div>
      
    <footer id="footer" class="post-footer footer">
      
      <hr>
      <div id="footerContent" class="footer-content">
        <p>This’s Ychous</p>


      </div>
    </footer>

      







<script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3/dist/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
